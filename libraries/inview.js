"use strict";!function(){function e(e){for(var t=0,n=e.length;t<n;t++){var i=e[t].toLowerCase();this[i]=new Number(t),this[i].string=i}}var a={index:0,check:function(e){e[$.expando]||(e[$.expando]=++a.index)},make:function(e,t){return a.check(e),t.guid+"-"+e[$.expando]}},u={TYPE:new e(["onscreen","inview"]),INVIEW_STATES:new e(["none","top","bottom","left","right","both"]),registered:[],shouldReProcess:!0,register:function(e,t,n){var i=o.isLocked(),r=$(e);u.registered.push({id:a.make(e,t),data:t,$element:r,type:n,_onscreen:i?null:P.get(r).uniqueMeasurementId,_hasTriggered:!1}),u.shouldReProcess=!0},unregister:function(e,t,n){for(var i=u.registered,r=a.make(e,t),o=i.length-1;-1<o;o--){var s=i[o];s.id==r&&s.type==n&&(i.splice(o,1),u.shouldReProcess=!0)}},process:function(){var e,t=u.registered;for(u.shouldReProcess=!0;u.shouldReProcess;){if(u.shouldReProcess=!1,0==(e=t.length))return;for(var n=0;n<e;n++){var i=t[n],r=P.get(i.$element);if(void 0!==i._onscreen&&i._hasTriggered)if(!(i._onscreen!=r.uniqueMeasurementId))continue;switch(i._onscreen=r.uniqueMeasurementId,i._hasTriggered=!0,i.type){case u.TYPE.onscreen:u.processOnScreen(i,r);break;case u.TYPE.inview:u.processInView(i,r)}if(u.shouldReProcess)break}}},processOnScreen:function(e,t){e.$element.trigger("onscreen",t)},processInView:function(e,t){var n,i,r=0<=t.percentFromTop&&t.percentFromTop<=100,o=0<=t.percentFromBottom&&t.percentFromBottom<=100,s=0<=t.percentFromLeft&&t.percentFromLeft<=100,a=0<=t.percentFromRight&&t.percentFromRight<=100;n=r&&o?u.INVIEW_STATES.both.string:r?u.INVIEW_STATES.top.string:o?u.INVIEW_STATES.bottom.string:u.INVIEW_STATES.none.string,i=s&&a?u.INVIEW_STATES.both.string:s?u.INVIEW_STATES.left.string:a?u.INVIEW_STATES.right.string:u.INVIEW_STATES.none.string;var c=[t.onscreen,i,n];e._inviewPreviousState=c,e._measurePreviousState=t,e.$element.trigger("inview",c)}},i={lastStartEvent:0,timeoutHandle:null,intervalDuration:100,hasRaf:!1,start:function(){i.lastStartEvent=(new Date).getTime(),i.repeat()},repeat:function(){i.stop(),i.hasRaf?i.timeoutHandle=requestAnimationFrame(i.main):i.timeoutHandle=setTimeout(i.main,i.intervalDuration)},hasExpired:function(){if(!((new Date).getTime()-i.lastStartEvent<1500))return i.stop(),!0},isThrottled:function(){return!((new Date).getTime()-i.lastMain>i.intervalDuration)},lastMain:(new Date).getTime(),main:function(){i.isThrottled()?i.repeat():(i.lastMain=(new Date).getTime(),i.hasExpired()||(0==u.registered.length?(i.stop(),i.intervalDuration=200):(i.stop(),i.intervalDuration=100),i.repeat(),o.isLocked()||u.process()))},stop:function(){null!==i.timeoutHandle&&(i.hasRaf?cancelAnimationFrame(i.timeoutHandle):clearTimeout(i.timeoutHandle),i.timeoutHandle=null)}};$.extend($.event.special,{onscreen:{noBubble:!0,add:function(e){u.register(this,e,u.TYPE.onscreen)},remove:function(e){u.unregister(this,e,u.TYPE.onscreen)}},inview:{noBubble:!0,add:function(e){u.register(this,e,u.TYPE.inview)},remove:function(e){u.unregister(this,e,u.TYPE.inview)}}}),$.extend($.fn,{onscreen:function(e){return e?(this.on("onscreen",e),this):P.get(this)},inview:function(e){return e?(this.on("inview",e),this):P.get(this)}});var o={locks:[],lock:function(e){o.isLocked(e)||o.locks.push(e)},unlock:function(e){if(o.isLocked(e)){for(var t=0,n=o.locks.length;t<n;t++){if(o.locks[t]==e){o.locks.splice(t,1);break}}i.start()}},isLocked:function(e){if(!e)return 0<o.locks.length;for(var t=0,n=o.locks.length;t<n;t++){if(o.locks[t]==e)return!0}return!1}},t={options:{},config:function(e){"object"==typeof e&&$.extend(t.options,e)}};$.inview=$.onscreen=function(){i.start()},$.extend($.inview,o,t);var b={$el:$(window),height:null,width:null,heightRatio:null,widthRatio:null,resize:function(){b.height=window.innerHeight||b.$el.height(),b.width=window.innerWidth||b.$el.width(),b.heightRatio=100/b.height,b.widthRatio=100/b.width,i.start()}},P={featureDetect:function(){i.hasRaf=window.requestAnimationFrame&&window.cancelAnimationFrame},get:function(e){if(0!=e.length){var t,n=e[0];try{t=n.getBoundingClientRect()}catch(e){t={top:0,right:0,bottom:0,left:0,width:0,height:0}}var i=t.height,r=t.width,o=t.top,s=t.left,a=b.height-(o+i),c=b.width-(s+r),u=Math.round(b.heightRatio*o),h=Math.round(b.widthRatio*s),l=Math.round(b.heightRatio*a),d=Math.round(b.widthRatio*c),g=null;g=0<s+r&&c<0&&s<0?r:s<0?r+s:s+r>b.width?b.width-s:r;var f=null;(f=0<o+i&&a<0&&o<0?i:o<0?i+o:o+i>b.height?b.height-o:i)<0&&(f=0),g<0&&(g=0);var m=Math.round(100/i*f),p=Math.round(100/r*g),v=i*r,w=f*g,T=Math.round(100/v*w),E=!0;(100<d||100<h||100<l||100<u)&&(E=!1),i<=0&&r<=0&&(E=!1);var I=P.isElementHidden(n);if(I&&(E=!1),E)for(var k=P.getParents(n),S=0,$=k.length-1;S<$;S++){var R=k[S];if(I=P.isElementHidden(R)){E=!1;break}if(P.isOutOfBounds(n,R)){E=!1;break}}return{top:o,left:s,bottom:a,right:c,percentFromTop:u,percentFromLeft:h,percentFromBottom:l,percentFromRight:d,percentInview:T,percentInviewHorizontal:p,percentInviewVertical:m,onscreen:E,uniqueMeasurementId:""+o+s+a+c+i+r+b.height+b.width+E,timestamp:(new Date).getTime()}}},getParents:function(e){for(var t,n=[];t=e.parentElement;)n.push(t),e=t;return n},isElementHidden:function(e){var t="none"==e.style.display||"hidden"==e.style.visibility;if(t)return!0;var n=window.getComputedStyle(e,null);return t="none"==n.display||"hidden"==n.visibility},isOutOfBounds:function(e,t){var n=t.clientWidth<t.scrollWidth,i=t.clientHeight<t.scrollHeight,r=n||i,o=$(t);if(!r||"visible"===o.css("overflow"))return!1;var s=$(e).offset(),a=o.offset(),c=s.top-a.top,u=s.left-a.left,h=c+e.clientHeight,l=u+e.clientWidth;return c>=t.clientHeight||u>=t.clientWidth||h<=0||l<=0}};$(window).on({"touchmove scroll mousedown keydown":i.start,resize:b.resize}),$(P.featureDetect),b.resize()}();